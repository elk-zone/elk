<script setup lang="ts">
import { STORAGE_KEY_LAST_ACCESSED_EXPLORE_ROUTE } from '~/constants'

defineProps<{
  activeClass: string
}>()

const lastAccessedExploreRoute = useLocalStorage(STORAGE_KEY_LAST_ACCESSED_EXPLORE_ROUTE, '')

const userSettings = useUserSettings()
const hideLabel = computed(() => getPreferences(userSettings.value, 'hideBottomNavLabel'))
</script>

<template>
  <NuxtLink
    :to="`/${currentServer}/explore/${lastAccessedExploreRoute}`"
    :aria-label="$t('nav.explore')"
    :active-class="activeClass"
    flex flex-col items-center place-content-center h-full flex-1 min-w-0
    class="coarse-pointer:select-none"
    :class="hideLabel ? null : 'gap-1'"
    @click="$scrollToTop"
  >
    <div aria-hidden="true" i-ri:compass-3-line />
    <span v-if="!hideLabel" text-xs overflow-hidden text-ellipsis whitespace-nowrap>{{ $t('nav.explore') }}</span>
  </NuxtLink>
</template>
